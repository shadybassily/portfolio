import{r as o}from"./react.ef76592b.js";import{d as z}from"./debounce.db2fda29.js";function X(t){let{debounce:r,scroll:n,polyfill:f,offsetSize:l}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const u=f||(typeof window>"u"?class{}:window.ResizeObserver);if(!u)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[h,p]=o.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),e=o.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:h}),a=r?typeof r=="number"?r:r.scroll:null,d=r?typeof r=="number"?r:r.resize:null,v=o.exports.useRef(!1);o.exports.useEffect(()=>(v.current=!0,()=>void(v.current=!1)));const[g,m,c]=o.exports.useMemo(()=>{const s=()=>{if(!e.current.element)return;const{left:O,top:C,width:y,height:L,bottom:R,right:B,x:S,y:M}=e.current.element.getBoundingClientRect(),i={left:O,top:C,width:y,height:L,bottom:R,right:B,x:S,y:M};e.current.element instanceof HTMLElement&&l&&(i.height=e.current.element.offsetHeight,i.width=e.current.element.offsetWidth),Object.freeze(i),v.current&&!W(e.current.lastBounds,i)&&p(e.current.lastBounds=i)};return[s,d?z(s,d):s,a?z(s,a):s]},[p,l,a,d]);function b(){e.current.scrollContainers&&(e.current.scrollContainers.forEach(s=>s.removeEventListener("scroll",c,!0)),e.current.scrollContainers=null),e.current.resizeObserver&&(e.current.resizeObserver.disconnect(),e.current.resizeObserver=null)}function w(){!e.current.element||(e.current.resizeObserver=new u(c),e.current.resizeObserver.observe(e.current.element),n&&e.current.scrollContainers&&e.current.scrollContainers.forEach(s=>s.addEventListener("scroll",c,{capture:!0,passive:!0})))}const x=s=>{!s||s===e.current.element||(b(),e.current.element=s,e.current.scrollContainers=E(s),w())};return H(c,Boolean(n)),D(m),o.exports.useEffect(()=>{b(),w()},[n,c,m]),o.exports.useEffect(()=>b,[]),[x,h,g]}function D(t){o.exports.useEffect(()=>{const r=t;return window.addEventListener("resize",r),()=>void window.removeEventListener("resize",r)},[t])}function H(t,r){o.exports.useEffect(()=>{if(r){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,r])}function E(t){const r=[];if(!t||t===document.body)return r;const{overflow:n,overflowX:f,overflowY:l}=window.getComputedStyle(t);return[n,f,l].some(u=>u==="auto"||u==="scroll")&&r.push(t),[...r,...E(t.parentElement)]}const T=["x","y","top","bottom","left","right","width","height"],W=(t,r)=>T.every(n=>t[n]===r[n]);export{X as u};
