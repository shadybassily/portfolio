import{_ as P}from"./tslib.9ddfe73c.js";const R=(e,t,n)=>Math.min(Math.max(n,e),t),m=e=>typeof e=="number",_=e=>Array.isArray(e)&&!m(e[0]),I=(e,t,n)=>{const i=t-e;return((n-e)%i+i)%i+e};function F(e,t){return _(e)?e[I(0,e.length,t)]:e}const A=(e,t,n)=>-n*e+n*t+e,b=e=>e,z=(e,t,n)=>t-e===0?1:(n-e)/(t-e);function T(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const s=z(0,t,i);e.push(A(n,1,s))}}function k(e){const t=[0];return T(t,e-1),t}function N(e,t=k(e.length),n=b){const i=e.length,s=i-t.length;return s>0&&T(t,s),r=>{let o=0;for(;o<i-2&&!(r<t[o+1]);o++);let f=R(0,1,z(t[o],t[o+1],r));return f=F(n,o)(f),A(e[o],e[o+1],f)}}const B=e=>typeof e=="function",M=e=>typeof e=="string";function q(e,t){return t?e*(1e3/t):0}function D(e,t){var n;return typeof e=="string"?t?((n=t[e])!==null&&n!==void 0||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}const p=new WeakMap;let u;function G(e,t){if(t){const{inlineSize:n,blockSize:i}=t[0];return{width:n,height:i}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function V({target:e,contentRect:t,borderBoxSize:n}){var i;(i=p.get(e))===null||i===void 0||i.forEach(s=>{s({target:e,contentSize:t,get size(){return G(e,n)}})})}function $(e){e.forEach(V)}function j(){typeof ResizeObserver>"u"||(u=new ResizeObserver($))}function J(e,t){u||j();const n=D(e);return n.forEach(i=>{let s=p.get(i);s||(s=new Set,p.set(i,s)),s.add(t),u==null||u.observe(i)}),()=>{n.forEach(i=>{const s=p.get(i);s==null||s.delete(t),s!=null&&s.size||u==null||u.unobserve(i)})}}const w=new Set;let v;function K(){v=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};w.forEach(n=>n(t))},window.addEventListener("resize",v)}function Q(e){return w.add(e),v||K(),()=>{w.delete(e),!w.size&&v&&(v=void 0)}}function U(e,t){return B(e)?Q(e):J(e,t)}const X=50,L=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),Y=()=>({time:0,x:L(),y:L()}),Z={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function H(e,t,n,i){const s=n[t],{length:r,position:o}=Z[t],f=s.current,h=n.time;s.current=e["scroll"+o],s.scrollLength=e["scroll"+r]-e["client"+r],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=z(0,s.scrollLength,s.current);const c=i-h;s.velocity=c>X?0:q(s.current-f,c)}function C(e,t,n){H(e,"x",t,n),H(e,"y",t,n),t.time=n}function ee(e,t){let n={x:0,y:0},i=e;for(;i&&i!==t;)if(i instanceof HTMLElement)n.x+=i.offsetLeft,n.y+=i.offsetTop,i=i.offsetParent;else if(i instanceof SVGGraphicsElement&&"getBBox"in i){const{top:s,left:r}=i.getBBox();for(n.x+=r,n.y+=s;i&&i.tagName!=="svg";)i=i.parentNode}return n}const te={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},E={start:0,center:.5,end:1};function W(e,t,n=0){let i=0;if(E[e]!==void 0&&(e=E[e]),M(e)){const s=parseFloat(e);e.endsWith("px")?i=s:e.endsWith("%")?e=s/100:e.endsWith("vw")?i=s/100*document.documentElement.clientWidth:e.endsWith("vh")?i=s/100*document.documentElement.clientHeight:e=s}return m(e)&&(i=t*e),n+i}const ne=[0,0];function ie(e,t,n,i){let s=Array.isArray(e)?e:ne,r=0,o=0;return m(e)?s=[e,e]:M(e)&&(e=e.trim(),e.includes(" ")?s=e.split(" "):s=[e,E[e]?e:"0"]),r=W(s[0],n,i),o=W(s[1],t),r-o}const se={x:0,y:0};function re(e,t,n){let{offset:i=te.All}=n;const{target:s=e,axis:r="y"}=n,o=r==="y"?"height":"width",f=s!==e?ee(s,e):se,h=s===e?{width:e.scrollWidth,height:e.scrollHeight}:{width:s.clientWidth,height:s.clientHeight},c={width:e.clientWidth,height:e.clientHeight};t[r].offset.length=0;let a=!t[r].interpolate;const d=i.length;for(let l=0;l<d;l++){const x=ie(i[l],c[o],h[o],f[r]);!a&&x!==t[r].interpolatorOffsets[l]&&(a=!0),t[r].offset[l]=x}a&&(t[r].interpolate=N(k(d),t[r].offset),t[r].interpolatorOffsets=[...t[r].offset]),t[r].progress=t[r].interpolate(t[r].current)}function oe(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let i=t;for(;i&&i!=e;)n.x.targetOffset+=i.offsetLeft,n.y.targetOffset+=i.offsetTop,i=i.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function ce(e,t,n,i={}){const s=i.axis||"y";return{measure:()=>oe(e,i.target,n),update:r=>{C(e,n,r),(i.offset||i.target)&&re(e,n,i)},notify:B(t)?()=>t(n):le(t,n[s])}}function le(e,t){return e.pause(),e.forEachNative((n,{easing:i})=>{var s,r;if(n.updateDuration)i||(n.easing=b),n.updateDuration(1);else{const o={duration:1e3};i||(o.easing="linear"),(r=(s=n.effect)===null||s===void 0?void 0:s.updateTiming)===null||r===void 0||r.call(s,o)}}),()=>{e.currentTime=t.progress}}const g=new WeakMap,O=new WeakMap,y=new WeakMap,S=e=>e===document.documentElement?window:e;function ae(e,t={}){var{container:n=document.documentElement}=t,i=P(t,["container"]);let s=y.get(n);s||(s=new Set,y.set(n,s));const r=Y(),o=ce(n,e,r,i);if(s.add(o),!g.has(n)){const c=()=>{const d=performance.now();for(const l of s)l.measure();for(const l of s)l.update(d);for(const l of s)l.notify()};g.set(n,c);const a=S(n);window.addEventListener("resize",c,{passive:!0}),n!==document.documentElement&&O.set(n,U(n,c)),a.addEventListener("scroll",c,{passive:!0})}const f=g.get(n),h=requestAnimationFrame(f);return()=>{var c;typeof e!="function"&&e.stop(),cancelAnimationFrame(h);const a=y.get(n);if(!a||(a.delete(o),a.size))return;const d=g.get(n);g.delete(n),d&&(S(n).removeEventListener("scroll",d),(c=O.get(n))===null||c===void 0||c(),window.removeEventListener("resize",d))}}export{ae as s};
