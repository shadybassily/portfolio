import{r as i}from"./react.ef76592b.js";function m(d){let e;const n=new Set,s=(r,c)=>{const t=typeof r=="function"?r(e):r;if(t!==e){const u=e;e=c?t:Object.assign({},e,t),n.forEach(f=>f(e,u))}},o=()=>e,p=(r,c=o,t=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let u=c(e);function f(){const b=c(e);if(!t(u,b)){const R=u;r(u=b,R)}}return n.add(f),()=>n.delete(f)},S={setState:s,getState:o,subscribe:(r,c,t)=>c||t?p(r,c,t):(n.add(r),()=>n.delete(r)),destroy:()=>n.clear()};return e=d(s,o,S),S}const E=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),v=E?i.exports.useEffect:i.exports.useLayoutEffect;function j(d){const e=typeof d=="function"?m(d):d,n=(s=e.getState,o=Object.is)=>{const[,p]=i.exports.useReducer(x=>x+1,0),a=e.getState(),l=i.exports.useRef(a),S=i.exports.useRef(s),r=i.exports.useRef(o),c=i.exports.useRef(!1),t=i.exports.useRef();t.current===void 0&&(t.current=s(a));let u,f=!1;(l.current!==a||S.current!==s||r.current!==o||c.current)&&(u=s(a),f=!o(t.current,u)),v(()=>{f&&(t.current=u),l.current=a,S.current=s,r.current=o,c.current=!1});const b=i.exports.useRef(a);v(()=>{const x=()=>{try{const g=e.getState(),w=S.current(g);r.current(t.current,w)||(l.current=g,t.current=w,p())}catch{c.current=!0,p()}},h=e.subscribe(x);return e.getState()!==b.current&&x(),h},[]);const R=f?u:t.current;return i.exports.useDebugValue(R),R};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const s=[n,e];return{next(){const o=s.length<=0;return{value:s.shift(),done:o}}}},n}export{j as c};
