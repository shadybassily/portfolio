import{r as k}from"./react.ef76592b.js";import{T as we,R as et,O as tt,P as nt,a as ue,L as fe,b as rt,c as ot,U as it,s as De,B as st,M as at,W as lt,C as ct,d as ut,e as ft,V as dt,f as pt,N as vt,A as mt,g as Le,h as te,i as ht,S as gt,j as yt,k as _t,D as wt}from"./three.4614967c.js";import{u as bt}from"./react-use-measure.e3e12096.js";import{F as Ct,u as Pt}from"./its-fine.b0cdc51c.js";import{R as Et,c as Y}from"./react-reconciler.99af5c73.js";import{j as F,a as Ae}from"./@react-spring.6db65d6f.js";import"./react-dom.ba6306c3.js";import{s as Fe,p as Mt,c as xt}from"./suspend-react.32e71e37.js";import{T as St,m as Tt,F as kt,G as Me,D as Ot,M as de,O as Rt}from"./three-stdlib.b4a34b8d.js";import{m as jt}from"./react-merge-refs.1793fef1.js";import{c as Dt}from"./zustand.5deef552.js";var be={exports:{}},Ie={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(h,P){var E=h.length;h.push(P);e:for(;0<E;){var x=E-1>>>1,D=h[x];if(0<u(D,P))h[x]=P,h[E]=D,E=x;else break e}}function o(h){return h.length===0?null:h[0]}function i(h){if(h.length===0)return null;var P=h[0],E=h.pop();if(E!==P){h[0]=E;e:for(var x=0,D=h.length,I=D>>>1;x<I;){var H=2*(x+1)-1,J=h[H],$=H+1,oe=h[$];if(0>u(J,E))$<D&&0>u(oe,J)?(h[x]=oe,h[$]=E,x=$):(h[x]=J,h[H]=E,x=H);else if($<D&&0>u(oe,E))h[x]=oe,h[$]=E,x=$;else break e}}return P}function u(h,P){var E=h.sortIndex-P.sortIndex;return E!==0?E:h.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var v=performance;e.unstable_now=function(){return v.now()}}else{var b=Date,m=b.now();e.unstable_now=function(){return b.now()-m}}var s=[],p=[],n=1,r=null,l=3,d=!1,f=!1,_=!1,y=typeof setTimeout=="function"?setTimeout:null,a=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(h){for(var P=o(p);P!==null;){if(P.callback===null)i(p);else if(P.startTime<=h)i(p),P.sortIndex=P.expirationTime,t(s,P);else break;P=o(p)}}function w(h){if(_=!1,g(h),!f)if(o(s)!==null)f=!0,G(C);else{var P=o(p);P!==null&&z(w,P.startTime-h)}}function C(h,P){f=!1,_&&(_=!1,a(j),j=-1),d=!0;var E=l;try{for(g(P),r=o(s);r!==null&&(!(r.expirationTime>P)||h&&!O());){var x=r.callback;if(typeof x=="function"){r.callback=null,l=r.priorityLevel;var D=x(r.expirationTime<=P);P=e.unstable_now(),typeof D=="function"?r.callback=D:r===o(s)&&i(s),g(P)}else i(s);r=o(s)}if(r!==null)var I=!0;else{var H=o(p);H!==null&&z(w,H.startTime-P),I=!1}return I}finally{r=null,l=E,d=!1}}var T=!1,R=null,j=-1,S=5,M=-1;function O(){return!(e.unstable_now()-M<S)}function A(){if(R!==null){var h=e.unstable_now();M=h;var P=!0;try{P=R(!0,h)}finally{P?B():(T=!1,R=null)}}else T=!1}var B;if(typeof c=="function")B=function(){c(A)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,q=N.port2;N.port1.onmessage=A,B=function(){q.postMessage(null)}}else B=function(){y(A,0)};function G(h){R=h,T||(T=!0,B())}function z(h,P){j=y(function(){h(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(h){h.callback=null},e.unstable_continueExecution=function(){f||d||(f=!0,G(C))},e.unstable_forceFrameRate=function(h){0>h||125<h?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<h?Math.floor(1e3/h):5},e.unstable_getCurrentPriorityLevel=function(){return l},e.unstable_getFirstCallbackNode=function(){return o(s)},e.unstable_next=function(h){switch(l){case 1:case 2:case 3:var P=3;break;default:P=l}var E=l;l=P;try{return h()}finally{l=E}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(h,P){switch(h){case 1:case 2:case 3:case 4:case 5:break;default:h=3}var E=l;l=h;try{return P()}finally{l=E}},e.unstable_scheduleCallback=function(h,P,E){var x=e.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?x+E:x):E=x,h){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=E+D,h={id:n++,callback:P,priorityLevel:h,startTime:E,expirationTime:D,sortIndex:-1},E>x?(h.sortIndex=E,t(p,h),o(s)===null&&h===o(p)&&(_?(a(j),j=-1):_=!0,z(w,E-x))):(h.sortIndex=D,t(s,h),f||d||(f=!0,G(C))),h},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(h){var P=l;return function(){var E=l;l=P;try{return h.apply(this,arguments)}finally{l=E}}}})(Ie);(function(e){e.exports=Ie})(be);var xe,Se;const Lt=(e,...t)=>t.reduce((o,i)=>o==null?void 0:o[i],e),W="ColorManagement"in we&&Lt(we,"ColorManagement")||null,ze=e=>e&&e.isOrthographicCamera,At=e=>e&&e.hasOwnProperty("current"),ne=typeof window<"u"&&((xe=window.document)!=null&&xe.createElement||((Se=window.navigator)==null?void 0:Se.product)==="ReactNative")?k.exports.useLayoutEffect:k.exports.useEffect;function Be(e){const t=k.exports.useRef(e);return ne(()=>void(t.current=e),[e]),t}function Ft({set:e}){return ne(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class He extends k.exports.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}He.getDerivedStateFromError=()=>({error:!0});const Ne="__default",Te=new Map,It=e=>e&&!!e.memoized&&!!e.changes;function Ge(e){const t=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(e)?Math.min(Math.max(e[0],t),e[1]):e}const Q=e=>{var t;return(t=e.__r3f)==null?void 0:t.root.getState()},L={obj:e=>e===Object(e)&&!L.arr(e)&&typeof e!="function",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",boo:e=>typeof e=="boolean",und:e=>e===void 0,arr:e=>Array.isArray(e),equ(e,t,{arrays:o="shallow",objects:i="reference",strict:u=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(L.str(e)||L.num(e))return e===t;const v=L.obj(e);if(v&&i==="reference")return e===t;const b=L.arr(e);if(b&&o==="reference")return e===t;if((b||v)&&e===t)return!0;let m;for(m in e)if(!(m in t))return!1;for(m in u?t:e)if(e[m]!==t[m])return!1;if(L.und(m)){if(b&&e.length===0&&t.length===0||v&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function zt(e){const t={nodes:{},materials:{}};return e&&e.traverse(o=>{o.name&&(t.nodes[o.name]=o),o.material&&!t.materials[o.material.name]&&(t.materials[o.material.name]=o.material)}),t}function Bt(e){e.dispose&&e.type!=="Scene"&&e.dispose();for(const t in e)t.dispose==null||t.dispose(),delete e[t]}function V(e,t){const o=e;return(t!=null&&t.primitive||!o.__r3f)&&(o.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t}),e}function Ce(e,t){let o=e;if(t.includes("-")){const i=t.split("-"),u=i.pop();return o=i.reduce((v,b)=>v[b],e),{target:o,key:u}}else return{target:o,key:t}}const ke=/-\d+$/;function pe(e,t,o){if(L.str(o)){if(ke.test(o)){const v=o.replace(ke,""),{target:b,key:m}=Ce(e,v);Array.isArray(b[m])||(b[m]=[])}const{target:i,key:u}=Ce(e,o);t.__r3f.previousAttach=i[u],i[u]=t}else t.__r3f.previousAttach=o(e,t)}function Oe(e,t,o){var i,u;if(L.str(o)){const{target:v,key:b}=Ce(e,o),m=t.__r3f.previousAttach;m===void 0?delete v[b]:v[b]=m}else(i=t.__r3f)==null||i.previousAttach==null||i.previousAttach(e,t);(u=t.__r3f)==null||delete u.previousAttach}function Ue(e,{children:t,key:o,ref:i,...u},{children:v,key:b,ref:m,...s}={},p=!1){var n;const r=(n=e==null?void 0:e.__r3f)!=null?n:{},l=Object.entries(u),d=[];if(p){const _=Object.keys(s);for(let y=0;y<_.length;y++)u.hasOwnProperty(_[y])||l.unshift([_[y],Ne+"remove"])}l.forEach(([_,y])=>{var a;if((a=e.__r3f)!=null&&a.primitive&&_==="object"||L.equ(y,s[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return d.push([_,y,!0,[]]);let c=[];_.includes("-")&&(c=_.split("-")),d.push([_,y,!1,c]);for(const g in u){const w=u[g];g.startsWith(`${_}-`)&&d.push([g,w,!1,g.split("-")])}});const f={...u};return r.memoizedProps&&r.memoizedProps.args&&(f.args=r.memoizedProps.args),r.memoizedProps&&r.memoizedProps.attach&&(f.attach=r.memoizedProps.attach),{memoized:f,changes:d}}function ve(e,t){var o,i,u;const v=(o=e.__r3f)!=null?o:{},b=v.root,m=(i=b==null||b.getState==null?void 0:b.getState())!=null?i:{},{memoized:s,changes:p}=It(t)?t:Ue(e,t),n=v.eventCount;e.__r3f&&(e.__r3f.memoizedProps=s);for(let l=0;l<p.length;l++){let[d,f,_,y]=p[l],a=e,c=a[d];if(y.length&&(c=y.reduce((g,w)=>g[w],e),!(c&&c.set))){const[g,...w]=y.reverse();a=w.reverse().reduce((C,T)=>C[T],e),d=g}if(f===Ne+"remove")if(a.constructor){let g=Te.get(a.constructor);g||(g=new a.constructor,Te.set(a.constructor,g)),f=g[d]}else f=0;if(_)f?v.handlers[d]=f:delete v.handlers[d],v.eventCount=Object.keys(v.handlers).length;else if(c&&c.set&&(c.copy||c instanceof fe)){if(Array.isArray(f))c.fromArray?c.fromArray(f):c.set(...f);else if(c.copy&&f&&f.constructor&&c.constructor===f.constructor)c.copy(f);else if(f!==void 0){const g=c instanceof Le;!g&&c.setScalar?c.setScalar(f):c instanceof fe&&f instanceof fe?c.mask=f.mask:c.set(f),!W&&!m.linear&&g&&c.convertSRGBToLinear()}}else a[d]=f,!m.linear&&a[d]instanceof rt&&a[d].format===ot&&a[d].type===it&&(a[d].encoding=De);X(e)}if(v.parent&&m.internal&&e.raycast&&n!==v.eventCount){const l=m.internal.interaction.indexOf(e);l>-1&&m.internal.interaction.splice(l,1),v.eventCount&&m.internal.interaction.push(e)}return!(p.length===1&&p[0][0]==="onUpdate")&&p.length&&(u=e.__r3f)!=null&&u.parent&&Pe(e),e}function X(e){var t,o;const i=(t=e.__r3f)==null||(o=t.root)==null||o.getState==null?void 0:o.getState();i&&i.internal.frames===0&&i.invalidate()}function Pe(e){e.onUpdate==null||e.onUpdate(e)}function Ht(e,t){e.manual||(ze(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function ie(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function Nt(){var e;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return Y.exports.DefaultEventPriority;switch((e=t.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Y.exports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Y.exports.ContinuousEventPriority;default:return Y.exports.DefaultEventPriority}}function qe(e,t,o,i){const u=o.get(t);u&&(o.delete(t),o.size===0&&(e.delete(i),u.target.releasePointerCapture(i)))}function Gt(e,t){const{internal:o}=e.getState();o.interaction=o.interaction.filter(i=>i!==t),o.initialHits=o.initialHits.filter(i=>i!==t),o.hovered.forEach((i,u)=>{(i.eventObject===t||i.object===t)&&o.hovered.delete(u)}),o.capturedMap.forEach((i,u)=>{qe(o.capturedMap,t,i,u)})}function Ut(e){function t(s){const{internal:p}=e.getState(),n=s.offsetX-p.initialClick[0],r=s.offsetY-p.initialClick[1];return Math.round(Math.sqrt(n*n+r*r))}function o(s){return s.filter(p=>["Move","Over","Enter","Out","Leave"].some(n=>{var r;return(r=p.__r3f)==null?void 0:r.handlers["onPointer"+n]}))}function i(s,p){const n=e.getState(),r=new Set,l=[],d=p?p(n.internal.interaction):n.internal.interaction;for(let a=0;a<d.length;a++){const c=Q(d[a]);c&&(c.raycaster.camera=void 0)}n.previousRoot||n.events.compute==null||n.events.compute(s,n);function f(a){const c=Q(a);if(!c||!c.events.enabled||c.raycaster.camera===null)return[];if(c.raycaster.camera===void 0){var g;c.events.compute==null||c.events.compute(s,c,(g=c.previousRoot)==null?void 0:g.getState()),c.raycaster.camera===void 0&&(c.raycaster.camera=null)}return c.raycaster.camera?c.raycaster.intersectObject(a,!0):[]}let _=d.flatMap(f).sort((a,c)=>{const g=Q(a.object),w=Q(c.object);return!g||!w?a.distance-c.distance:w.events.priority-g.events.priority||a.distance-c.distance}).filter(a=>{const c=ie(a);return r.has(c)?!1:(r.add(c),!0)});n.events.filter&&(_=n.events.filter(_,n));for(const a of _){let c=a.object;for(;c;){var y;(y=c.__r3f)!=null&&y.eventCount&&l.push({...a,eventObject:c}),c=c.parent}}if("pointerId"in s&&n.internal.capturedMap.has(s.pointerId))for(let a of n.internal.capturedMap.get(s.pointerId).values())r.has(ie(a.intersection))||l.push(a.intersection);return l}function u(s,p,n,r){const l=e.getState();if(s.length){const d={stopped:!1};for(const f of s){const _=Q(f.object)||l,{raycaster:y,pointer:a,camera:c,internal:g}=_,w=new te(a.x,a.y,0).unproject(c),C=M=>{var O,A;return(O=(A=g.capturedMap.get(M))==null?void 0:A.has(f.eventObject))!=null?O:!1},T=M=>{const O={intersection:f,target:p.target};g.capturedMap.has(M)?g.capturedMap.get(M).set(f.eventObject,O):g.capturedMap.set(M,new Map([[f.eventObject,O]])),p.target.setPointerCapture(M)},R=M=>{const O=g.capturedMap.get(M);O&&qe(g.capturedMap,f.eventObject,O,M)};let j={};for(let M in p){let O=p[M];typeof O!="function"&&(j[M]=O)}let S={...f,...j,pointer:a,intersections:s,stopped:d.stopped,delta:n,unprojectedPoint:w,ray:y.ray,camera:c,stopPropagation(){const M="pointerId"in p&&g.capturedMap.get(p.pointerId);if((!M||M.has(f.eventObject))&&(S.stopped=d.stopped=!0,g.hovered.size&&Array.from(g.hovered.values()).find(O=>O.eventObject===f.eventObject))){const O=s.slice(0,s.indexOf(f));v([...O,f])}},target:{hasPointerCapture:C,setPointerCapture:T,releasePointerCapture:R},currentTarget:{hasPointerCapture:C,setPointerCapture:T,releasePointerCapture:R},nativeEvent:p};if(r(S),d.stopped===!0)break}}return s}function v(s){const{internal:p}=e.getState();for(const n of p.hovered.values())if(!s.length||!s.find(r=>r.object===n.object&&r.index===n.index&&r.instanceId===n.instanceId)){const l=n.eventObject.__r3f,d=l==null?void 0:l.handlers;if(p.hovered.delete(ie(n)),l!=null&&l.eventCount){const f={...n,intersections:s};d.onPointerOut==null||d.onPointerOut(f),d.onPointerLeave==null||d.onPointerLeave(f)}}}function b(s,p){for(let n=0;n<p.length;n++){const r=p[n].__r3f;r==null||r.handlers.onPointerMissed==null||r.handlers.onPointerMissed(s)}}function m(s){switch(s){case"onPointerLeave":case"onPointerCancel":return()=>v([]);case"onLostPointerCapture":return p=>{const{internal:n}=e.getState();"pointerId"in p&&n.capturedMap.has(p.pointerId)&&(n.capturedMap.delete(p.pointerId),v([]))}}return function(n){const{onPointerMissed:r,internal:l}=e.getState();l.lastEvent.current=n;const d=s==="onPointerMove",f=s==="onClick"||s==="onContextMenu"||s==="onDoubleClick",y=i(n,d?o:void 0),a=f?t(n):0;s==="onPointerDown"&&(l.initialClick=[n.offsetX,n.offsetY],l.initialHits=y.map(g=>g.eventObject)),f&&!y.length&&a<=2&&(b(n,l.interaction),r&&r(n)),d&&v(y);function c(g){const w=g.eventObject,C=w.__r3f,T=C==null?void 0:C.handlers;if(!!(C!=null&&C.eventCount))if(d){if(T.onPointerOver||T.onPointerEnter||T.onPointerOut||T.onPointerLeave){const R=ie(g),j=l.hovered.get(R);j?j.stopped&&g.stopPropagation():(l.hovered.set(R,g),T.onPointerOver==null||T.onPointerOver(g),T.onPointerEnter==null||T.onPointerEnter(g))}T.onPointerMove==null||T.onPointerMove(g)}else{const R=T[s];R?(!f||l.initialHits.includes(w))&&(b(n,l.interaction.filter(j=>!l.initialHits.includes(j))),R(g)):f&&l.initialHits.includes(w)&&b(n,l.interaction.filter(j=>!l.initialHits.includes(j)))}}u(y,n,a,c)}}return{handlePointer:m}}let Ee={},$e=e=>void(Ee={...Ee,...e});function qt(e,t){function o(n,{args:r=[],attach:l,...d},f){let _=`${n[0].toUpperCase()}${n.slice(1)}`,y;if(n==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const a=d.object;y=V(a,{type:n,root:f,attach:l,primitive:!0})}else{const a=Ee[_];if(!a)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(r))throw new Error("R3F: The args prop must be an array!");y=V(new a(...r),{type:n,root:f,attach:l,memoizedProps:{args:r}})}return y.__r3f.attach===void 0&&(y instanceof st?y.__r3f.attach="geometry":y instanceof at&&(y.__r3f.attach="material")),_!=="inject"&&ve(y,d),y}function i(n,r){let l=!1;if(r){var d,f;(d=r.__r3f)!=null&&d.attach?pe(n,r,r.__r3f.attach):r.isObject3D&&n.isObject3D&&(n.add(r),l=!0),l||(f=n.__r3f)==null||f.objects.push(r),r.__r3f||V(r,{}),r.__r3f.parent=n,Pe(r),X(r)}}function u(n,r,l){let d=!1;if(r){var f,_;if((f=r.__r3f)!=null&&f.attach)pe(n,r,r.__r3f.attach);else if(r.isObject3D&&n.isObject3D){r.parent=n,r.dispatchEvent({type:"added"});const y=n.children.filter(c=>c!==r),a=y.indexOf(l);n.children=[...y.slice(0,a),r,...y.slice(a)],d=!0}d||(_=n.__r3f)==null||_.objects.push(r),r.__r3f||V(r,{}),r.__r3f.parent=n,Pe(r),X(r)}}function v(n,r,l=!1){n&&[...n].forEach(d=>b(r,d,l))}function b(n,r,l){if(r){var d,f,_;if(r.__r3f&&(r.__r3f.parent=null),(d=n.__r3f)!=null&&d.objects&&(n.__r3f.objects=n.__r3f.objects.filter(w=>w!==r)),(f=r.__r3f)!=null&&f.attach)Oe(n,r,r.__r3f.attach);else if(r.isObject3D&&n.isObject3D){var y;n.remove(r),(y=r.__r3f)!=null&&y.root&&Gt(r.__r3f.root,r)}const c=(_=r.__r3f)==null?void 0:_.primitive,g=l===void 0?r.dispose!==null&&!c:l;if(!c){var a;v((a=r.__r3f)==null?void 0:a.objects,r,g),v(r.children,r,g)}r.__r3f&&(delete r.__r3f.root,delete r.__r3f.objects,delete r.__r3f.handlers,delete r.__r3f.memoizedProps,c||delete r.__r3f),g&&r.dispose&&r.type!=="Scene"&&be.exports.unstable_scheduleCallback(be.exports.unstable_IdlePriority,()=>{try{r.dispose()}catch{}}),X(n)}}function m(n,r,l,d){var f;const _=(f=n.__r3f)==null?void 0:f.parent;if(!_)return;const y=o(r,l,n.__r3f.root);if(n.children){for(const a of n.children)a.__r3f&&i(y,a);n.children=n.children.filter(a=>!a.__r3f)}n.__r3f.objects.forEach(a=>i(y,a)),n.__r3f.objects=[],n.__r3f.autoRemovedBeforeAppend||b(_,n),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),i(_,y),y.raycast&&y.__r3f.eventCount&&y.__r3f.root.getState().internal.interaction.push(y),[d,d.alternate].forEach(a=>{a!==null&&(a.stateNode=y,a.ref&&(typeof a.ref=="function"?a.ref(y):a.ref.current=y))})}const s=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Et({createInstance:o,removeChild:b,appendChild:i,appendInitialChild:i,insertBefore:u,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(n,r)=>{if(!r)return;const l=n.getState().scene;!l.__r3f||(l.__r3f.root=n,i(l,r))},removeChildFromContainer:(n,r)=>{!r||b(n.getState().scene,r)},insertInContainerBefore:(n,r,l)=>{if(!r||!l)return;const d=n.getState().scene;!d.__r3f||u(d,r,l)},getRootHostContext:()=>null,getChildHostContext:n=>n,finalizeInitialChildren(n){var r;const l=(r=n==null?void 0:n.__r3f)!=null?r:{};return Boolean(l.handlers)},prepareUpdate(n,r,l,d){if(n.__r3f.primitive&&d.object&&d.object!==n)return[!0];{const{args:f=[],children:_,...y}=d,{args:a=[],children:c,...g}=l;if(!Array.isArray(f))throw new Error("R3F: the args prop must be an array!");if(f.some((C,T)=>C!==a[T]))return[!0];const w=Ue(n,y,g,!0);return w.changes.length?[!1,w]:null}},commitUpdate(n,[r,l],d,f,_,y){r?m(n,d,_,y):ve(n,l)},commitMount(n,r,l,d){var f;const _=(f=n.__r3f)!=null?f:{};n.raycast&&_.handlers&&_.eventCount&&n.__r3f.root.getState().internal.interaction.push(n)},getPublicInstance:n=>n,prepareForCommit:()=>null,preparePortalMount:n=>V(n.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(n){var r;const{attach:l,parent:d}=(r=n.__r3f)!=null?r:{};l&&d&&Oe(d,n,l),n.isObject3D&&(n.visible=!1),X(n)},unhideInstance(n,r){var l;const{attach:d,parent:f}=(l=n.__r3f)!=null?l:{};d&&f&&pe(f,n,d),(n.isObject3D&&r.visible==null||r.visible)&&(n.visible=!0),X(n)},createTextInstance:s,hideTextInstance:s,unhideTextInstance:s,getCurrentEventPriority:()=>t?t():Y.exports.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&L.fun(performance.now)?performance.now:L.fun(Date.now)?Date.now:()=>0,scheduleTimeout:L.fun(setTimeout)?setTimeout:void 0,cancelTimeout:L.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ve}}const We=e=>!!(e!=null&&e.render),Ve=k.exports.createContext(null),$t=(e,t)=>{const o=Dt((m,s)=>{const p=new te,n=new te,r=new te;function l(a=s().camera,c=n,g=s().size){const{width:w,height:C,top:T,left:R}=g,j=w/C;c instanceof te?r.copy(c):r.set(...c);const S=a.getWorldPosition(p).distanceTo(r);if(ze(a))return{width:w/a.zoom,height:C/a.zoom,top:T,left:R,factor:1,distance:S,aspect:j};{const M=a.fov*Math.PI/180,O=2*Math.tan(M/2)*S,A=O*(w/C);return{width:A,height:O,top:T,left:R,factor:w/A,distance:S,aspect:j}}}let d;const f=a=>m(c=>({performance:{...c.performance,current:a}})),_=new ht;return{set:m,get:s,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(a=1)=>e(s(),a),advance:(a,c)=>t(a,c,s()),legacy:!1,linear:!1,flat:!1,scene:V(new gt),controls:null,clock:new yt,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const a=s();d&&clearTimeout(d),a.performance.current!==a.performance.min&&f(a.performance.min),d=setTimeout(()=>f(s().performance.max),a.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:a=>m(c=>({...c,events:{...c.events,...a}})),setSize:(a,c,g,w,C)=>{const T=s().camera,R={width:a,height:c,top:w||0,left:C||0,updateStyle:g};m(j=>({size:R,viewport:{...j.viewport,...l(T,n,R)}}))},setDpr:a=>m(c=>{const g=Ge(a);return{viewport:{...c.viewport,dpr:g,initialDpr:c.viewport.initialDpr||g}}}),setFrameloop:(a="always")=>{const c=s().clock;c.stop(),c.elapsedTime=0,a!=="never"&&(c.start(),c.elapsedTime=0),m(()=>({frameloop:a}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:k.exports.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(a,c,g)=>{const w=s().internal;return w.priority=w.priority+(c>0?1:0),w.subscribers.push({ref:a,priority:c,store:g}),w.subscribers=w.subscribers.sort((C,T)=>C.priority-T.priority),()=>{const C=s().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(c>0?1:0),C.subscribers=C.subscribers.filter(T=>T.ref!==a))}}}}}),i=o.getState();let u=i.size,v=i.viewport.dpr,b=i.camera;return o.subscribe(()=>{const{camera:m,size:s,viewport:p,gl:n,set:r}=o.getState();if(s!==u||p.dpr!==v){var l;u=s,v=p.dpr,Ht(m,s),n.setPixelRatio(p.dpr);const d=(l=s.updateStyle)!=null?l:typeof HTMLCanvasElement<"u"&&n.domElement instanceof HTMLCanvasElement;n.setSize(s.width,s.height,d)}m!==b&&(b=m,r(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(m)}})))}),o.subscribe(m=>e(m)),o};let se,Wt=new Set,Vt=new Set,Xt=new Set;function me(e,t){if(!!e.size)for(const{callback:o}of e.values())o(t)}function Z(e,t){switch(e){case"before":return me(Wt,t);case"after":return me(Vt,t);case"tail":return me(Xt,t)}}let he,ge;function ye(e,t,o){let i=t.clock.getDelta();for(t.frameloop==="never"&&typeof e=="number"&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),he=t.internal.subscribers,se=0;se<he.length;se++)ge=he[se],ge.ref.current(ge.store.getState(),i,o);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function Yt(e){let t=!1,o,i,u;function v(s){i=requestAnimationFrame(v),t=!0,o=0,Z("before",s);for(const n of e.values()){var p;u=n.store.getState(),u.internal.active&&(u.frameloop==="always"||u.internal.frames>0)&&!((p=u.gl.xr)!=null&&p.isPresenting)&&(o+=ye(s,u))}if(Z("after",s),o===0)return Z("tail",s),t=!1,cancelAnimationFrame(i)}function b(s,p=1){var n;if(!s)return e.forEach(r=>b(r.store.getState()),p);(n=s.gl.xr)!=null&&n.isPresenting||!s.internal.active||s.frameloop==="never"||(s.internal.frames=Math.min(60,s.internal.frames+p),t||(t=!0,requestAnimationFrame(v)))}function m(s,p=!0,n,r){if(p&&Z("before",s),n)ye(s,n,r);else for(const l of e.values())ye(s,l.store.getState());p&&Z("after",s)}return{loop:v,invalidate:b,advance:m}}function Xe(){const e=k.exports.useContext(Ve);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function U(e=o=>o,t){return Xe()(e,t)}function Ye(e,t=0){const o=Xe(),i=o.getState().internal.subscribe,u=Be(e);return ne(()=>i(u,t,o),[t,i,o]),null}function Ke(e,t){return function(o,...i){const u=new o;return e&&e(u),Promise.all(i.map(v=>new Promise((b,m)=>u.load(v,s=>{s.scene&&Object.assign(s,zt(s.scene)),b(s)},t,s=>m(new Error(`Could not load ${v}: ${s.message})`))))))}}function re(e,t,o,i){const u=Array.isArray(t)?t:[t],v=Fe(Ke(o,i),[e,...u],{equal:L.equ});return Array.isArray(t)?v:v[0]}re.preload=function(e,t,o){const i=Array.isArray(t)?t:[t];return Mt(Ke(o),[e,...i])};re.clear=function(e,t){const o=Array.isArray(t)?t:[t];return xt([e,...o])};const K=new Map,{invalidate:Re,advance:je}=Yt(K),{reconciler:ce,applyProps:ae}=qt(K,Nt),ee={objects:"shallow",strict:!1},Kt=(e,t)=>{const o=typeof e=="function"?e(t):e;return We(o)?o:new lt({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function Jt(e,t){if(t)return t;if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:o,height:i,top:u,left:v}=e.parentElement.getBoundingClientRect();return{width:o,height:i,top:u,left:v}}else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function Qt(e){const t=K.get(e),o=t==null?void 0:t.fiber,i=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const u=typeof reportError=="function"?reportError:console.error,v=i||$t(Re,je),b=o||ce.createContainer(v,Y.exports.ConcurrentRoot,null,!1,null,"",u,null);t||K.set(e,{fiber:b,store:v});let m,s=!1;return{configure(p={}){let{gl:n,size:r,events:l,onCreated:d,shadows:f=!1,linear:_=!1,flat:y=!1,legacy:a=!1,orthographic:c=!1,frameloop:g="always",dpr:w=[1,2],performance:C,raycaster:T,camera:R,onPointerMissed:j}=p,S=v.getState(),M=S.gl;S.gl||S.set({gl:M=Kt(n,e)});let O=S.raycaster;O||S.set({raycaster:O=new et});const{params:A,...B}=T||{};if(L.equ(B,O,ee)||ae(O,{...B}),L.equ(A,O.params,ee)||ae(O,{params:{...O.params,...A}}),!S.camera){const h=R instanceof ct,P=h?R:c?new tt(0,0,0,0,.1,1e3):new nt(75,0,.1,1e3);h||(P.position.z=5,R&&ae(P,R),R!=null&&R.rotation||P.lookAt(0,0,0)),S.set({camera:P})}if(!S.xr){const h=(x,D)=>{const I=v.getState();I.frameloop!=="never"&&je(x,!0,I,D)},P=()=>{const x=v.getState();x.gl.xr.enabled=x.gl.xr.isPresenting,x.gl.xr.setAnimationLoop(x.gl.xr.isPresenting?h:null),x.gl.xr.isPresenting||Re(x)},E={connect(){const x=v.getState().gl;x.xr.addEventListener("sessionstart",P),x.xr.addEventListener("sessionend",P)},disconnect(){const x=v.getState().gl;x.xr.removeEventListener("sessionstart",P),x.xr.removeEventListener("sessionend",P)}};M.xr&&E.connect(),S.set({xr:E})}if(M.shadowMap){const h=M.shadowMap.enabled,P=M.shadowMap.type;if(M.shadowMap.enabled=!!f,L.boo(f))M.shadowMap.type=ue;else if(L.str(f)){var N;const E={basic:ut,percentage:ft,soft:ue,variance:dt};M.shadowMap.type=(N=E[f])!=null?N:ue}else L.obj(f)&&Object.assign(M.shadowMap,f);(h!==M.shadowMap.enabled||P!==M.shadowMap.type)&&(M.shadowMap.needsUpdate=!0)}W&&("enabled"in W?W.enabled=!a:"legacyMode"in W&&(W.legacyMode=a));const q=_?pt:De,G=y?vt:mt;M.outputEncoding!==q&&(M.outputEncoding=q),M.toneMapping!==G&&(M.toneMapping=G),S.legacy!==a&&S.set(()=>({legacy:a})),S.linear!==_&&S.set(()=>({linear:_})),S.flat!==y&&S.set(()=>({flat:y})),n&&!L.fun(n)&&!We(n)&&!L.equ(n,M,ee)&&ae(M,n),l&&!S.events.handlers&&S.set({events:l(v)});const z=Jt(e,r);return L.equ(z,S.size,ee)||S.setSize(z.width,z.height,z.updateStyle,z.top,z.left),w&&S.viewport.dpr!==Ge(w)&&S.setDpr(w),S.frameloop!==g&&S.setFrameloop(g),S.onPointerMissed||S.set({onPointerMissed:j}),C&&!L.equ(C,S.performance,ee)&&S.set(h=>({performance:{...h.performance,...C}})),m=d,s=!0,this},render(p){return s||this.configure(),ce.updateContainer(F(Zt,{store:v,children:p,onCreated:m,rootElement:e}),b,null,()=>{}),v},unmount(){Je(e)}}}function Zt({store:e,children:t,onCreated:o,rootElement:i}){return ne(()=>{const u=e.getState();u.set(v=>({internal:{...v.internal,active:!0}})),o&&o(u),e.getState().events.connected||u.events.connect==null||u.events.connect(i)},[]),k.exports.createElement(Ve.Provider,{value:e},t)}function Je(e,t){const o=K.get(e),i=o==null?void 0:o.fiber;if(i){const u=o==null?void 0:o.store.getState();u&&(u.internal.active=!1),ce.updateContainer(null,i,null,()=>{u&&setTimeout(()=>{try{var v,b,m,s;u.events.disconnect==null||u.events.disconnect(),(v=u.gl)==null||(b=v.renderLists)==null||b.dispose==null||b.dispose(),(m=u.gl)==null||m.forceContextLoss==null||m.forceContextLoss(),(s=u.gl)!=null&&s.xr&&u.xr.disconnect(),Bt(u),K.delete(e),t&&t(e)}catch{}},500)})}}ce.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:k.exports.version});const _e={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function en(e){const{handlePointer:t}=Ut(e);return{priority:1,enabled:!0,compute(o,i,u){i.pointer.set(o.offsetX/i.size.width*2-1,-(o.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(_e).reduce((o,i)=>({...o,[i]:t(i)}),{}),update:()=>{var o;const{events:i,internal:u}=e.getState();(o=u.lastEvent)!=null&&o.current&&i.handlers&&i.handlers.onPointerMove(u.lastEvent.current)},connect:o=>{var i;const{set:u,events:v}=e.getState();v.disconnect==null||v.disconnect(),u(b=>({events:{...b.events,connected:o}})),Object.entries((i=v.handlers)!=null?i:[]).forEach(([b,m])=>{const[s,p]=_e[b];o.addEventListener(s,m,{passive:p})})},disconnect:()=>{const{set:o,events:i}=e.getState();if(i.connected){var u;Object.entries((u=i.handlers)!=null?u:[]).forEach(([v,b])=>{if(i&&i.connected instanceof HTMLElement){const[m]=_e[v];i.connected.removeEventListener(m,b)}}),o(v=>({events:{...v.events,connected:void 0}}))}}}}const tn=k.exports.forwardRef(function({children:t,fallback:o,resize:i,style:u,gl:v,events:b=en,eventSource:m,eventPrefix:s,shadows:p,linear:n,flat:r,legacy:l,orthographic:d,frameloop:f,dpr:_,performance:y,raycaster:a,camera:c,onPointerMissed:g,onCreated:w,...C},T){k.exports.useMemo(()=>$e(we),[]);const R=Pt(),[j,S]=bt({scroll:!0,debounce:{scroll:50,resize:0},...i}),M=k.exports.useRef(null),O=k.exports.useRef(null),[A,B]=k.exports.useState(null);k.exports.useImperativeHandle(T,()=>M.current);const N=Be(g),[q,G]=k.exports.useState(!1),[z,h]=k.exports.useState(!1);if(q)throw q;if(z)throw z;const P=k.exports.useRef(null);return S.width>0&&S.height>0&&A&&(P.current||(P.current=Qt(A)),P.current.configure({gl:v,events:b,shadows:p,linear:n,flat:r,legacy:l,orthographic:d,frameloop:f,dpr:_,performance:y,raycaster:a,camera:c,size:S,onPointerMissed:(...x)=>N.current==null?void 0:N.current(...x),onCreated:x=>{x.events.connect==null||x.events.connect(m?At(m)?m.current:m:O.current),s&&x.setEvents({compute:(D,I)=>{const H=D[s+"X"],J=D[s+"Y"];I.pointer.set(H/I.size.width*2-1,-(J/I.size.height)*2+1),I.raycaster.setFromCamera(I.pointer,I.camera)}}),w==null||w(x)}}),P.current.render(F(R,{children:F(He,{set:h,children:F(k.exports.Suspense,{fallback:F(Ft,{set:G}),children:t})})}))),ne(()=>{B(M.current)},[]),k.exports.useEffect(()=>{if(A)return()=>Je(A)},[A]),F("div",{ref:O,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:m?"none":"auto",...u},...C,children:F("div",{ref:j,style:{width:"100%",height:"100%"},children:F("canvas",{ref:M,style:{display:"block"},children:o})})})}),hn=k.exports.forwardRef(function(t,o){return F(Ct,{children:F(tn,{...t,ref:o})})}),nn=["string","number"],rn=e=>{let t="";const o=[];return k.exports.Children.forEach(e,i=>{nn.includes(typeof i)?t+=i+"":o.push(i)}),[t,...o]},gn=k.exports.forwardRef(({font:e,letterSpacing:t=0,lineHeight:o=1,size:i=1,height:u=.2,bevelThickness:v=.1,bevelSize:b=.01,bevelEnabled:m=!1,bevelOffset:s=0,bevelSegments:p=4,curveSegments:n=8,smooth:r,children:l,...d},f)=>{k.exports.useMemo(()=>$e({RenamedTextGeometry:St}),[]);const _=k.exports.useRef(null),y=Fe(async()=>{let C=typeof e=="string"?await(await fetch(e)).json():e;return new kt().parse(C)},[e]),a=k.exports.useMemo(()=>({font:y,size:i,height:u,bevelThickness:v,bevelSize:b,bevelEnabled:m,bevelSegments:p,bevelOffset:s,curveSegments:n,letterSpacing:t,lineHeight:o}),[y,i,u,v,b,m,p,s,n,t,o]),[c,...g]=k.exports.useMemo(()=>rn(l),[l]),w=k.exports.useMemo(()=>[c,a],[c,a]);return k.exports.useLayoutEffect(()=>{r&&(_.current.geometry=Tt(_.current.geometry,r),_.current.geometry.computeVertexNormals())},[w,r]),k.exports.useImperativeHandle(f,()=>_.current,[]),Ae("mesh",{...d,ref:_,children:[F("renamedTextGeometry",{args:w}),g]})});let le=null;function Qe(e,t,o){return i=>{o&&o(i),e&&(le||(le=new Ot),le.setDecoderPath(typeof e=="string"?e:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),i.setDRACOLoader(le)),t&&i.setMeshoptDecoder(typeof de=="function"?de():de)}}function Ze(e,t=!0,o=!0,i){return re(Me,e,Qe(t,o,i))}Ze.preload=(e,t=!0,o=!0,i)=>re.preload(Me,e,Qe(t,o,i));Ze.clear=e=>re.clear(Me,e);const yn=k.exports.forwardRef(({makeDefault:e,camera:t,regress:o,domElement:i,enableDamping:u=!0,onChange:v,onStart:b,onEnd:m,...s},p)=>{const n=U(C=>C.invalidate),r=U(C=>C.camera),l=U(C=>C.gl),d=U(C=>C.events),f=U(C=>C.setEvents),_=U(C=>C.set),y=U(C=>C.get),a=U(C=>C.performance),c=t||r,g=i||d.connected||l.domElement,w=k.exports.useMemo(()=>new Rt(c),[c]);return Ye(()=>{w.enabled&&w.update()},-1),k.exports.useEffect(()=>(w.connect(g),()=>void w.dispose()),[g,o,w,n]),k.exports.useEffect(()=>{const C=j=>{n(),o&&a.regress(),v&&v(j)},T=j=>{b&&b(j)},R=j=>{m&&m(j)};return w.addEventListener("change",C),w.addEventListener("start",T),w.addEventListener("end",R),()=>{w.removeEventListener("start",T),w.removeEventListener("end",R),w.removeEventListener("change",C)}},[v,b,m,w,n,f]),k.exports.useEffect(()=>{if(e){const C=y().controls;return _({controls:w}),()=>_({controls:C})}},[e,w]),F("primitive",{ref:p,object:w,enableDamping:u,...s})}),_n=k.exports.forwardRef(({children:e,speed:t=1,rotationIntensity:o=1,floatIntensity:i=1,floatingRange:u=[-.1,.1],...v},b)=>{const m=k.exports.useRef(null),s=k.exports.useRef(Math.random()*1e4);return Ye(p=>{var n,r;const l=s.current+p.clock.getElapsedTime();m.current.rotation.x=Math.cos(l/4*t)/8*o,m.current.rotation.y=Math.sin(l/4*t)/8*o,m.current.rotation.z=Math.sin(l/4*t)/20*o;let d=Math.sin(l/4*t)/10;d=_t.mapLinear(d,-.1,.1,(n=u==null?void 0:u[0])!==null&&n!==void 0?n:-.1,(r=u==null?void 0:u[1])!==null&&r!==void 0?r:.1),m.current.position.y=d*i}),F("group",{...v,children:F("group",{ref:jt([m,b]),children:e})})}),wn=k.exports.forwardRef(({fog:e=!1,renderOrder:t,depthWrite:o=!1,colorStop:i=0,color:u="black",opacity:v=.5,...b},m)=>{const s=k.exports.useMemo(()=>{const p=document.createElement("canvas");p.width=128,p.height=128;const n=p.getContext("2d"),r=n.createRadialGradient(p.width/2,p.height/2,0,p.width/2,p.height/2,p.width/2);return r.addColorStop(i,new Le(u).getStyle()),r.addColorStop(1,"rgba(0,0,0,0)"),n.fillStyle=r,n.fillRect(0,0,p.width,p.height),p},[u,i]);return Ae("mesh",{renderOrder:t,ref:m,"rotation-x":-Math.PI/2,...b,children:[F("planeGeometry",{}),F("meshBasicMaterial",{transparent:!0,opacity:v,fog:e,depthWrite:o,side:wt,children:F("canvasTexture",{attach:"map",args:[s]})})]})});export{hn as C,_n as F,yn as O,wn as S,gn as T,Ze as a,re as u};
